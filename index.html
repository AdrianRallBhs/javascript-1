<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Doxygen with github: &lt;tt&gt;\@actions/core&lt;/tt&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Doxygen with github
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><code>@actions/core</code> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_node_modules__actions_core_README"></a> </p><blockquote class="doxtable">
<p >&zwj;Core functions for setting results, logging, registering secrets and exporting variables across actions </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md1"></a>
Usage</h1>
<h2><a class="anchor" id="autotoc_md2"></a>
Import the package</h2>
<div class="fragment"><div class="line">// javascript</div>
<div class="line">const core = require(&#39;@actions/core&#39;);</div>
<div class="line"> </div>
<div class="line">// typescript</div>
<div class="line">import * as core from &#39;@actions/core&#39;;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md3"></a>
Inputs/Outputs</h3>
<p >Action inputs can be read with <code>getInput</code> which returns a <code>string</code> or <code>getBooleanInput</code> which parses a boolean based on the <a href="https://yaml.org/spec/1.2/spec.html#id2804923">yaml 1.2 specification</a>. If <code>required</code> set to be false, the input should have a default value in <code>action.yml</code>.</p>
<p >Outputs can be set with <code>setOutput</code> which makes them available to be mapped into inputs of other actions to ensure they are decoupled.</p>
<div class="fragment"><div class="line">const myInput = core.getInput(&#39;inputName&#39;, { required: true });</div>
<div class="line">const myBooleanInput = core.getBooleanInput(&#39;booleanInputName&#39;, { required: true });</div>
<div class="line">const myMultilineInput = core.getMultilineInput(&#39;multilineInputName&#39;, { required: true });</div>
<div class="line">core.setOutput(&#39;outputKey&#39;, &#39;outputVal&#39;);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md4"></a>
Exporting variables</h3>
<p >Since each step runs in a separate process, you can use <code>exportVariable</code> to add it to this step and future steps environment blocks.</p>
<div class="fragment"><div class="line">core.exportVariable(&#39;envVar&#39;, &#39;Val&#39;);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md5"></a>
Setting a secret</h3>
<p >Setting a secret registers the secret with the runner to ensure it is masked in logs.</p>
<div class="fragment"><div class="line">core.setSecret(&#39;myPassword&#39;);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md6"></a>
PATH Manipulation</h3>
<p >To make a tool's path available in the path for the remainder of the job (without altering the machine or containers state), use <code>addPath</code>. The runner will prepend the path given to the jobs PATH.</p>
<div class="fragment"><div class="line">core.addPath(&#39;/path/to/mytool&#39;);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md7"></a>
Exit codes</h3>
<p >You should use this library to set the failing exit code for your action. If status is not set and the script runs to completion, that will lead to a success.</p>
<div class="fragment"><div class="line">const core = require(&#39;@actions/core&#39;);</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">  // Do stuff</div>
<div class="line">}</div>
<div class="line">catch (err) {</div>
<div class="line">  // setFailed logs the message and sets a failing exit code</div>
<div class="line">  core.setFailed(`Action failed with error ${err}`);</div>
<div class="line">}</div>
</div><!-- fragment --><p >Note that <code>setNeutral</code> is not yet implemented in actions V2 but equivalent functionality is being planned.</p>
<h3><a class="anchor" id="autotoc_md8"></a>
Logging</h3>
<p >Finally, this library provides some utilities for logging. Note that debug logging is hidden from the logs by default. This behavior can be toggled by enabling the <a href="../../docs/action-debugging.md#step-debug-logs">Step Debug Logs</a>.</p>
<div class="fragment"><div class="line">const core = require(&#39;@actions/core&#39;);</div>
<div class="line"> </div>
<div class="line">const myInput = core.getInput(&#39;input&#39;);</div>
<div class="line">try {</div>
<div class="line">  core.debug(&#39;Inside try block&#39;);</div>
<div class="line">  </div>
<div class="line">  if (!myInput) {</div>
<div class="line">    core.warning(&#39;myInput was not set&#39;);</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  if (core.isDebug()) {</div>
<div class="line">    // curl -v https://github.com</div>
<div class="line">  } else {</div>
<div class="line">    // curl https://github.com</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  // Do stuff</div>
<div class="line">  core.info(&#39;Output to the actions build log&#39;)</div>
<div class="line"> </div>
<div class="line">  core.notice(&#39;This is a message that will also emit an annotation&#39;)</div>
<div class="line">}</div>
<div class="line">catch (err) {</div>
<div class="line">  core.error(`Error ${err}, action may still succeed though`);</div>
<div class="line">}</div>
</div><!-- fragment --><p >This library can also wrap chunks of output in foldable groups.</p>
<div class="fragment"><div class="line">const core = require(&#39;@actions/core&#39;)</div>
<div class="line"> </div>
<div class="line">// Manually wrap output</div>
<div class="line">core.startGroup(&#39;Do some function&#39;)</div>
<div class="line">doSomeFunction()</div>
<div class="line">core.endGroup()</div>
<div class="line"> </div>
<div class="line">// Wrap an asynchronous function call</div>
<div class="line">const result = await core.group(&#39;Do something async&#39;, async () =&gt; {</div>
<div class="line">  const response = await doSomeHTTPRequest()</div>
<div class="line">  return response</div>
<div class="line">})</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md9"></a>
Annotations</h3>
<p >This library has 3 methods that will produce <a href="https://docs.github.com/en/rest/reference/checks#create-a-check-run">annotations</a>. </p><div class="fragment"><div class="line">core.error(&#39;This is a bad error. This will also fail the build.&#39;)</div>
<div class="line"> </div>
<div class="line">core.warning(&#39;Something went wrong, but it\&#39;s not bad enough to fail the build.&#39;)</div>
<div class="line"> </div>
<div class="line">core.notice(&#39;Something happened that you might want to know about.&#39;)</div>
</div><!-- fragment --><p >These will surface to the UI in the Actions page and on Pull Requests. They look something like this:</p>
<p ><img src="../../docs/assets/annotations.png" alt="Annotations Image" class="inline"/></p>
<p >These annotations can also be attached to particular lines and columns of your source files to show exactly where a problem is occuring.</p>
<p >These options are: </p><div class="fragment"><div class="line">export interface AnnotationProperties {</div>
<div class="line">  /**</div>
<div class="line">   * A title for the annotation.</div>
<div class="line">   */</div>
<div class="line">  title?: string</div>
<div class="line"> </div>
<div class="line">  /**</div>
<div class="line">   * The name of the file for which the annotation should be created.</div>
<div class="line">   */</div>
<div class="line">  file?: string</div>
<div class="line"> </div>
<div class="line">  /**</div>
<div class="line">   * The start line for the annotation.</div>
<div class="line">   */</div>
<div class="line">  startLine?: number</div>
<div class="line"> </div>
<div class="line">  /**</div>
<div class="line">   * The end line for the annotation. Defaults to `startLine` when `startLine` is provided.</div>
<div class="line">   */</div>
<div class="line">  endLine?: number</div>
<div class="line"> </div>
<div class="line">  /**</div>
<div class="line">   * The start column for the annotation. Cannot be sent when `startLine` and `endLine` are different values.</div>
<div class="line">   */</div>
<div class="line">  startColumn?: number</div>
<div class="line"> </div>
<div class="line">  /**</div>
<div class="line">   * The start column for the annotation. Cannot be sent when `startLine` and `endLine` are different values.</div>
<div class="line">   * Defaults to `startColumn` when `startColumn` is provided.</div>
<div class="line">   */</div>
<div class="line">  endColumn?: number</div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md10"></a>
Styling output</h3>
<p >Colored output is supported in the Action logs via standard <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape codes</a>. 3/4 bit, 8 bit and 24 bit colors are all supported.</p>
<p >Foreground colors:</p>
<div class="fragment"><div class="line">// 3/4 bit</div>
<div class="line">core.info(&#39;\u001b[35mThis foreground will be magenta&#39;)</div>
<div class="line"> </div>
<div class="line">// 8 bit</div>
<div class="line">core.info(&#39;\u001b[38;5;6mThis foreground will be cyan&#39;)</div>
<div class="line"> </div>
<div class="line">// 24 bit</div>
<div class="line">core.info(&#39;\u001b[38;2;255;0;0mThis foreground will be bright red&#39;)</div>
</div><!-- fragment --><p >Background colors:</p>
<div class="fragment"><div class="line">// 3/4 bit</div>
<div class="line">core.info(&#39;\u001b[43mThis background will be yellow&#39;);</div>
<div class="line"> </div>
<div class="line">// 8 bit</div>
<div class="line">core.info(&#39;\u001b[48;5;6mThis background will be cyan&#39;)</div>
<div class="line"> </div>
<div class="line">// 24 bit</div>
<div class="line">core.info(&#39;\u001b[48;2;255;0;0mThis background will be bright red&#39;)</div>
</div><!-- fragment --><p >Special styles:</p>
<div class="fragment"><div class="line">core.info(&#39;\u001b[1mBold text&#39;)</div>
<div class="line">core.info(&#39;\u001b[3mItalic text&#39;)</div>
<div class="line">core.info(&#39;\u001b[4mUnderlined text&#39;)</div>
</div><!-- fragment --><p >ANSI escape codes can be combined with one another:</p>
<div class="fragment"><div class="line">core.info(&#39;\u001b[31;46mRed foreground with a cyan background and \u001b[1mbold text at the end&#39;);</div>
</div><!-- fragment --><blockquote class="doxtable">
<p >&zwj;Note: Escape codes reset at the start of each line </p>
</blockquote>
<div class="fragment"><div class="line">core.info(&#39;\u001b[35mThis foreground will be magenta&#39;)</div>
<div class="line">core.info(&#39;This foreground will reset to the default&#39;)</div>
</div><!-- fragment --><p >Manually typing escape codes can be a little difficult, but you can use third party modules such as <a href="https://github.com/chalk/ansi-styles">ansi-styles</a>.</p>
<div class="fragment"><div class="line">const style = require(&#39;ansi-styles&#39;);</div>
<div class="line">core.info(style.color.ansi16m.hex(&#39;#abcdef&#39;) + &#39;Hello world!&#39;)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md11"></a>
Action state</h3>
<p >You can use this library to save state and get state for sharing information between a given wrapper action:</p>
<p ><b>action.yml</b>:</p>
<div class="fragment"><div class="line">name: &#39;Wrapper action sample&#39;</div>
<div class="line">inputs:</div>
<div class="line">  name:</div>
<div class="line">    default: &#39;GitHub&#39;</div>
<div class="line">runs:</div>
<div class="line">  using: &#39;node12&#39;</div>
<div class="line">  main: &#39;main.js&#39;</div>
<div class="line">  post: &#39;cleanup.js&#39;</div>
</div><!-- fragment --><p >In action's <code>main.js</code>:</p>
<div class="fragment"><div class="line">const core = require(&#39;@actions/core&#39;);</div>
<div class="line"> </div>
<div class="line">core.saveState(&quot;pidToKill&quot;, 12345);</div>
</div><!-- fragment --><p >In action's <code>cleanup.js</code>:</p>
<div class="fragment"><div class="line">const core = require(&#39;@actions/core&#39;);</div>
<div class="line"> </div>
<div class="line">var pid = core.getState(&quot;pidToKill&quot;);</div>
<div class="line"> </div>
<div class="line">process.kill(pid);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md12"></a>
OIDC Token</h3>
<p >You can use these methods to interact with the GitHub OIDC provider and get a JWT ID token which would help to get access token from third party cloud providers.</p>
<p ><b>Method Name</b>: getIDToken()</p>
<p ><b>Inputs</b></p>
<p >audience : optional</p>
<p ><b>Outputs</b></p>
<p >A <a href="https://jwt.io/">JWT</a> ID Token</p>
<p >In action's <code>main.ts</code>: </p><div class="fragment"><div class="line">const core = require(&#39;@actions/core&#39;);</div>
<div class="line">async function getIDTokenAction(): Promise&lt;void&gt; {</div>
<div class="line">  </div>
<div class="line">   const audience = core.getInput(&#39;audience&#39;, {required: false})</div>
<div class="line">   </div>
<div class="line">   const id_token1 = await core.getIDToken()            // ID Token with default audience</div>
<div class="line">   const id_token2 = await core.getIDToken(audience)    // ID token with custom audience</div>
<div class="line">   </div>
<div class="line">   // this id_token can be used to get access token from third party cloud providers</div>
<div class="line">}</div>
<div class="line">getIDTokenAction()</div>
</div><!-- fragment --><p >In action's <code>actions.yml</code>:</p>
<div class="fragment"><div class="line">name: &#39;GetIDToken&#39;</div>
<div class="line">description: &#39;Get ID token from Github OIDC provider&#39;</div>
<div class="line">inputs:</div>
<div class="line">  audience:  </div>
<div class="line">    description: &#39;Audience for which the ID token is intended for&#39;</div>
<div class="line">    required: false</div>
<div class="line">outputs:</div>
<div class="line">  id_token1: </div>
<div class="line">    description: &#39;ID token obtained from OIDC provider&#39;</div>
<div class="line">  id_token2: </div>
<div class="line">    description: &#39;ID token obtained from OIDC provider&#39;</div>
<div class="line">runs:</div>
<div class="line">  using: &#39;node12&#39;</div>
<div class="line">  main: &#39;dist/index.js&#39;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md13"></a>
Filesystem path helpers</h3>
<p >You can use these methods to manipulate file paths across operating systems.</p>
<p >The <code>toPosixPath</code> function converts input paths to Posix-style (Linux) paths. The <code>toWin32Path</code> function converts input paths to Windows-style paths. These functions work independently of the underlying runner operating system.</p>
<div class="fragment"><div class="line">toPosixPath(&#39;\\foo\\bar&#39;) // =&gt; /foo/bar</div>
<div class="line">toWin32Path(&#39;/foo/bar&#39;) // =&gt; \foo\bar</div>
</div><!-- fragment --><p >The <code>toPlatformPath</code> function converts input paths to the expected value on the runner's operating system.</p>
<div class="fragment"><div class="line">// On a Windows runner.</div>
<div class="line">toPlatformPath(&#39;/foo/bar&#39;) // =&gt; \foo\bar</div>
<div class="line"> </div>
<div class="line">// On a Linux runner.</div>
<div class="line">toPlatformPath(&#39;\\foo\\bar&#39;) // =&gt; /foo/bar</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
